sources:
  my_db:
    kind: postgres
    host: ${DB_HOST}
    port: ${DB_PORT}
    user: ${DB_USER}
    password: ${DB_PASSWORD}
    database: ${DB_NAME}
    queryParams:
      sslmode: require
      options: "project=ep-flat-shape-ahnri4k-pooler"
      options: "project=ep-flat-shape-ahnri4k-pooler"
tools:
  list_users:
    kind: postgres-sql
    source: my_db
    description: List all users in the system
    statement: "SELECT * FROM users LIMIT 20"
  list_campaigns:
    kind: postgres-sql
    source: my_db
    description: List all campaigns
    statement: "SELECT * FROM campaigns LIMIT 20"
  list_leads:
    kind: postgres-sql
    source: my_db
    description: List recent leads
    statement: "SELECT * FROM leads ORDER BY createdAt DESC LIMIT 20"
  count_leads_by_status:
    kind: postgres-sql
    source: my_db
    description: Count leads group by enrichment status
    statement: "SELECT enriched, count(*) as count FROM leads GROUP BY enriched"
